@{
    ViewData["Title"] = "Admin";
}


<head>
     <link rel="stylesheet" href="/css/custom.css" />

    <link href="https://fonts.googleapis.com/css?family=McLaren|Montserrat&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>



<body>

    <div id="Events" class="tabcontent">
        <h3 id="admintable">Events</h3>
        <a href="/event/eventaddition" id="newevent" class="btn btn-info">Create Event</a>
        <a href="/event/eventaddition" id="newevent" class="btn btn-info">Delete Event</a>
        <button type="button" class="btn btn-info" id="myBtn"> View Volunteers</button>
        <p>
            <table id ="table" style="width:100%">


                <tr>
                 
                    <th>Event Type</th>
                    <th>Date/Time</th>
                    <th>Duration</th>
                    <th>Description</th>
                    
                </tr>

                  <tbody>
                      <tr class="tabboby">
                          
                      </tr>
                  </tbody>

              </table>
          </p>

           

        </div>


        <div id="myModal" class="modal">

          <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3 id="admintable">Event Request</h3>
          <p>
              <table id="atable" style="width:100%">
                  <tr>


                  <th>Name</th>

                  <th>Date</th>

                  </tr>
              </table>
          </p>
            </div>

            
            
             
        </div>

        
    <div class="modal" id="myModal" role="dialog">
    
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Volunteers</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>

        </div>
        <div class="modal-body">
          <table id="atable" style="width:100%">
              <tr>
                  <th>Name</th>
                  <th>Date</th>
                  <th>Approve</th>
              </tr>
              <tbody>
                  <tr>


                  </tr>
              </tbody>
          </table>
        </div>
        
      </div>
  </div>

    <script>
    $(document).ready(function () {
                
            
                $.ajax({

                        type: 'get',
                        dataType: "json",
                        url: "https://localhost:5001/event/all",
                        success: function (results) {
                            for (var a = 0; a < 3; a++){ 
                               

                                var i = results[a];

                                

                            var type = i['eventName'];
                            var ti = i['eventDateTime'];
                            var regex = new RegExp('/([0-9]|0[0-9]|1[0-9])/([0 - 9][0 - 9] | [0 - 9]) / [0 - 9]{ 4} at ([0 - 9] | 0[0 - 9] | 1[0 - 9]): [0 - 9]{ 2 }: [0 - 9]{ 2 } (AM | PM)/g');
                            var date = ti.split(regex);
                            var dur = (i['eventDuration']);
                            var desc = i['eventDescription'];

                                
                                $('#table').append('<tr><td>' + type + '</td><td>' + date + '</td><td>' + dur + 'hrs' + '</td><td>' + desc + '</td></tr>');
                        }
                    }
                });
            
        });

        $(document).ready(function () {
                
                
                    $.ajax({
                        type: 'get',
                        dataType: "json",
                        url: "https://localhost:5001/eventrequest/all",
                        success: function (results) {
                            for (var a = 0; a < results.length; a++){ 
                                

                                var i = results[a];
                            var type = i['evenRequestId'];
                            var usr = i['eventRequesterId'];
                            var date = (i['eventRequestDate']);
                            var desc = i['eventDescription'];

                                
                                var usr = i['eventRequesterId'];
                               
                               
                               
                                var date = (i['eventRequestDate']);
                                var name = getdata(usr,date);
                                

                              
                                
                        }
                    }
                    });
                      function getdata(id,date) {
                      $.ajax({
                        type: 'get',
                        dataType: "json",
                        url: "https://localhost:5001/user/"+id,
                        success: function (results) {
                            var first = results['firstName'];
                            var last = results['lastName'];
                            
                            console.log(first);
                            console.log(last);
                            $('#atable').append('<tr><td>' + first +" "+ last + '</td><td>' + date + '</td><td><button type="button" class="btn btn-info">'+ 'Accept'+ '</button></td><td><button type="button" class="btn btn-info">'+ 'Deny'+ '</button></td></tr>');
                        }
                     
                      });
                          
                }
            
        });

        $(document).ready(function(){
          $("#myBtn").click(function(){
            $("#myModal").modal();
          });
        });
            

    </script>
</body>
